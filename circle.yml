general:
  artifacts:
    - "doc"

checkout:
  post:
    - git submodule sync
    - git submodule update --init
    - cd kii; git submodule sync
    - cd kii; git submodule update --init

dependencies:
  override:
    - sudo apt-get install doxygen

test:
  pre:
    - make

deployment:
  production:
    tag: /v[0-9]+.*/
    commands:
      - bash circleci_scripts/release_doc.sh
