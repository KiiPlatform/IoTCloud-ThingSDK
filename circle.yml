general:
  artifacts:
    - "doc"

checkout:
  post:
    - git submodule sync
    - git submodule update --init
    - cd kii; git submodule sync
    - cd kii; git submodule update --init

dependencies:
  override:
    - sudo apt-get install doxygen
    - sudo apt-get install cmake

test:
  pre:
    - make
  override:
    - cd tests/small_tests; make test

deployment:
  production:
    tag: /^v[0-9]+(\.[0-9]+){0,2}((-.*)?)?$/
    commands:
      - bash circleci_scripts/release_doc.sh
