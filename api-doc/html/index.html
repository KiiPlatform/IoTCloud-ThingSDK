<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>thing-if SDK: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">thing-if SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">thing-if SDK Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Thing SDK for Kii Thing Interaction Framework (kii thing-if) .<br/>
</p>
<h2>Retrieve submodules.</h2>
<p>When you build this SDK for the first time, you need to execute following commands:</p>
<p>```sh </p>
<h1>git submodule init</h1>
<h1>git submodule update</h1>
<h1>cd kii</h1>
<h1>git submodule init</h1>
<h1>git submodule update</h1>
<h1>cd ../</h1>
<p>```</p>
<p>These commands retrieve required modules for this SDK.</p>
<h2>Build</h2>
<p>```sh </p>
<h1>make</h1>
<p>```</p>
<p>This makes libkiithingifsdk.so.</p>
<h2>Debug Build</h2>
<p>```sh </p>
<h1>make DEBUG=1</h1>
<p>```</p>
<p>Standard build for debugging.</p>
<ul>
<li>KII_PUSH_KEEP_ALIVE_INTERVAL_SECONDS is set to 300 seconds.</li>
<li>KII_JSON_FIXED_TOKEN_NUM is set to 128.</li>
<li>Debug option (-g) and Debug log enabled.</li>
</ul>
<h2>Configure KII_PUSH_KEEP_ALIVE_INTERVAL_SECONDS</h2>
<p>KII_PUSH_KEEP_ALIVE_INTERVAL_SECONDS macro is used to manage the Keep Alive Time Interval in MQTT. By default it is set to 300 seconds in the Makefile. To override the value, we provides <code>KEEP_ALIVE_INTERVAL</code> variable.</p>
<p>``` </p>
<h1>make KEEP_ALIVE_INTERVAL=600</h1>
<p>```</p>
<p>If 0 is specified, turn off the keep alive mechanism defined in MQTT. Setting short period will increase the load of MQTT broker when there is a lot of connected devices. For details, please refer to the <a href="http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html#_Toc385349238">MQTT spec</a>.</p>
<h2>Configure KII_JSON_FIXED_TOKEN_NUM</h2>
<p>KII_JSON_FIXED_TOKEN_NUM macro is used to manage amount memory used to parse JSON when received it from server. Memory is allocated on stack. By default it is set to 128 in the Makefile. To override the value, we provides <code>FIXED_JSON_TOKEN_NUM</code> variable.</p>
<p>``` </p>
<h1>make FIXED_JSON_TOKEN_NUM=256</h1>
<p>```</p>
<p>Size of memory allocated by this can be calculated as following. ```c sizeof(kii_json_token_t) * KII_JSON_FIXED_TOKEN_NUM ``` </p>
<h2>Dynamic memory allocation for JSON parsing</h2>
<p>If you prefer to dynamica allocation than fixed memory allocation by KII_JSON_FIXED_TOKEN_NUM, You will build sdk with FLEXIBLE_JSON_TOKEN variable.</p>
<p>``` </p>
<h1>make FLEXIBLE_JSON_TOKEN=1</h1>
<p>```</p>
<p>In this case, you need to implement KII_JSON_RESOURCE_CB function and set the pointer in kii_t struct.</p>
<p>If both KII_JSON_FIXED_TOKEN_NUM and FLEXIBLE_JSON_TOKEN are specified, KII_JSON_FIXED_TOKEN_NUM is ignored.</p>
<h2>Connect MQTT server using non-secure connection.</h2>
<p>By default SDK connect to a MQTT broker using secure connection(tls). If you need to use non-secure connection(tcp) , please set KII_MQTT_USE_PORT_TCP macro.</p>
<p>``` </p>
<h1>make KII_MQTT_USE_PORT_TCP=1</h1>
<p>```</p>
<h2>Combination of variables</h2>
<p>Only KII_JSON_FIXED_TOKEN_NUM and FLEXIBLE_JSON_TOKEN is exclusive. DEBUG, KEEP_ALIVE_INTERVAL, KII_MQTT_USE_PORT_TCP and either KII_JSON_FIXED_TOKEN_NUM or FLEXIBLE_JSON_TOKEN can be combined.</p>
<p>ex.)</p>
<p>``` </p>
<h1>make DEBUG=1 KEEP_ALIVE_INTERVAL=3600 KII_MQTT_USE_PORT_TCP=1 FLEXIBLE_JSON_TOKEN=1</h1>
<p>```</p>
<h2>How to use</h2>
<p>After the build finished, API Documentation is created under ./doc/html/index.html</p>
<h2>Sample</h2>
<p>linux-sample shows how to implement the client application works in the Thing.</p>
<h2>Environment implementations</h2>
<p>This SDK requests creating three tasks by task_create_cb_impl callback.</p>
<p>List of task name symbols.</p>
<ul>
<li><p class="startli">KII_THING_IF_TASK_NAME_UPDATE_STATUS</p>
<p class="startli">The task of sending onboarded status.</p>
</li>
<li><p class="startli">KII_TASK_NAME_RECV_MSG</p>
<p class="startli">The task of receiving push messages.</p>
</li>
<li><p class="startli">KII_TASK_NAME_PING_REQ</p>
<p class="startli">The task of sending ping request.</p>
</li>
</ul>
<p>You'll specify stack size, depth and priority, etc depending on the environment. Please check samples for reference. For example, <a href="./cc3200-sample/freertos_thingsdk_demo/kii_thing_if_environment_cc3200.c">Ti CC3200 environment implementation</a>.</p>
<h2>Execute tests</h2>
<p>```sh </p>
<h1>cd tests/small_tests</h1>
<h1>make run</h1>
<p>``` </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Feb 8 2018 10:53:56 for thing-if SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
